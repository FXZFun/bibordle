var solution=words[Math.floor(Math.random()*words.length)],restoringFromLocalStorage=!1,lineId=0,letterId=0,currentLetters=[],guessedWords="     ".split(" "),shareResult="Bibordle Practice {guesses}/6\n",gameEnabled=!0,validLetters="qwertyuiopasdfghjklzxcvbnmenterbackspace";document.addEventListener("keyup",a=>{a=a.key.toLowerCase();validLetters.includes(a)&&typeKey(a)});
function typeKey(a){gameEnabled&&("enter"==a?guess():"backspace"==a?backspace():(document.getElementById("line"+lineId).children[letterId].innerText=a.toUpperCase(),letterId++,currentLetters.push(a.toLowerCase())))}function backspace(){currentLetters.pop();0!=letterId&&letterId--;document.getElementById("line"+lineId).children[letterId].innerText=""}
function guess(){var a=currentLetters.join("");5!=a.length||words.includes(a)?5!=a.length?showAlert("Not enough letters"):(guessedWords[lineId]=a,localStorage.setItem("wordsGuessed-practice",JSON.stringify(guessedWords)),localStorage.setItem("loadGame-practice",(new Date).getMonth()+1+"/"+(new Date).getDate()+"/"+(new Date).getFullYear()),localStorage.setItem("solution-practice",solution),currentLetters.forEach((c,b)=>{solution.includes(c)?solution[b]==c?updateLetterClass(c,b,"good"):c==currentLetters[solution.indexOf(c)]?
updateLetterClass(c,b,"bad"):updateLetterClass(c,b,"inword"):updateLetterClass(c,b,"bad")}),a==solution||5==lineId?finishGame():(currentLetters=[],lineId++,letterId=0,a="",document.getElementById("line"+lineId).classList.remove("notActive"),shareResult+="\n")):showAlert("Not in word list")}
function updateLetterClass(a,c,b){document.getElementById(`line${lineId}`).children[c].classList=b;document.getElementById(`keyboard-${a}`).classList.add(b);"good"==b?shareResult+="\ud83d\udfe9":"inword"==b?shareResult+="\ud83d\udfe8":"bad"==b&&(shareResult+="\u2b1c")}
function finishGame(){gameEnabled=!1;if(!restoringFromLocalStorage){if(currentLetters.join("")==solution){var a=localStorage.hasOwnProperty("gamesWon-practice")?parseInt(localStorage.getItem("gamesWon-practice")):0;localStorage.setItem("gamesWon-practice",a+1)}a=localStorage.hasOwnProperty("gamesPlayed-practice")?parseInt(localStorage.getItem("gamesPlayed-practice")):0;localStorage.setItem("gamesPlayed-practice",a+1)}showStats(currentLetters.join("")==solution)}
function showAlert(a,c=!0){document.getElementById("alertText").innerText=a;document.getElementById("alert").style.display="block";c&&setTimeout(function(){document.getElementById("alert").style.display="none"},3E3)}
function showStats(a){document.getElementById("statsPage").style.display="block";a?document.getElementById("status").classList.add("win"):document.getElementById("status").classList.add("lose");var c=new RegExp(solution+"(?=[^\\w\\d])","gi"),b=kjv.filter(d=>d.text.match(c));b=b[Math.floor(Math.random()*b.length)];document.getElementById("word").innerText=solution.toUpperCase();document.getElementById("verse").innerHTML=b.text.replaceAll(new RegExp(solution,"gi"),d=>"<b>"+d+"</b>");document.getElementById("reference").innerText=
b.book_name+" "+b.chapter+":"+b.verse;document.getElementById("reference").href="/search/?reference="+b.book_name+" "+b.chapter+":"+b.verse+"&load=true&word="+solution;localStorage.setItem("completedOn-practice",localStorage.getItem("loadGame-practice"));document.getElementById("gamesPlayed").innerText=parseInt(localStorage.getItem("gamesPlayed-practice"));showAlert(solution.toUpperCase(),!0);null==document.getElementById("statsBtn")&&(b=document.createElement("button"),b.id="statsBtn",b.innerText=
"Show Stats",b.classList.add("switchMode"),b.onclick=()=>{showStats(a)},document.getElementById("btnRow").appendChild(b))}
function share(){shareResult+="\nbibordle.web.app";var a=currentLetters.join("")!=solution?"X":lineId+1;shareResult=shareResult.replace("{guesses}",a);a=document.createElement("textarea");a.style="position: fixed;top:0;left:0;width:2px;height:2px;";a.innerHTML=shareResult;document.body.appendChild(a);a.select();document.execCommand("copy");a.style="display: none";document.getElementById("statsPage").style.display="none";showAlert("Copied to clipboard")};
