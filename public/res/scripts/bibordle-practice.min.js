var solution=words[Math.floor(Math.random()*words.length)],restoringFromLocalStorage=!1,lineId=0,letterId=0,currentLetters=[],guessedWords="     ".split(" "),shareResult="Bibordle Practice {guesses}/6\n",gameEnabled=!0,validLetters="qwertyuiopasdfghjklzxcvbnmenterbackspace";document.addEventListener("keyup",a=>{a=a.key.toLowerCase();validLetters.includes(a)&&typeKey(a)});
function typeKey(a){gameEnabled&&("enter"==a?guess():"backspace"==a?backspace():5>letterId&&(document.getElementById("line"+lineId).children[letterId].innerText=a.toUpperCase(),letterId++,currentLetters.push(a.toLowerCase())))}function backspace(){currentLetters.pop();0!=letterId&&letterId--;document.getElementById("line"+lineId).children[letterId].innerText=""}
function guess(){var a=currentLetters.join(""),b=solution;5!=a.length||words.includes(a)?5!=a.length?showAlert("Not enough letters"):(guessedWords[lineId]=a,localStorage.setItem("wordsGuessed-practice",JSON.stringify(guessedWords)),localStorage.setItem("loadGame-practice",(new Date).getMonth()+1+"/"+(new Date).getDate()+"/"+(new Date).getFullYear()),localStorage.setItem("solution-practice",solution),currentLetters.forEach((d,c)=>{b.includes(d)?b[c]==d?updateLetterClass(d,c,"good"):c==b.indexOf(d)?
updateLetterClass(d,c,"bad"):updateLetterClass(d,c,"inword"):updateLetterClass(d,c,"bad");b=b.replace(d,"_")}),a==solution||5==lineId?finishGame():(currentLetters=[],lineId++,letterId=0,a="",document.getElementById("line"+lineId).classList.remove("notActive"),shareResult+="\n")):showAlert("Not in word list")}
function updateLetterClass(a,b,d){document.getElementById(`line${lineId}`).children[b].classList=d;document.getElementById(`keyboard-${a}`).classList.add(d);"good"==d?shareResult+="\ud83d\udfe9":"inword"==d?shareResult+="\ud83d\udfe8":"bad"==d&&(shareResult+="\u2b1c")}
function finishGame(){gameEnabled=!1;if(!restoringFromLocalStorage){if(currentLetters.join("")==solution){var a=localStorage.hasOwnProperty("gamesWon-practice")?parseInt(localStorage.getItem("gamesWon-practice")):0;localStorage.setItem("gamesWon-practice",a+1)}a=localStorage.hasOwnProperty("gamesPlayed-practice")?parseInt(localStorage.getItem("gamesPlayed-practice")):0;localStorage.setItem("gamesPlayed-practice",a+1)}showStats(currentLetters.join("")==solution)}
function showAlert(a,b=!0){document.getElementById("alertText").innerText=a;document.getElementById("alert").style.display="block";b&&setTimeout(function(){document.getElementById("alert").style.display="none"},3E3)}function toggleDarkMode(){document.querySelector("body").classList.contains("darkMode")?(localStorage.removeItem("darkMode"),document.querySelector("body").classList.remove("darkMode")):(document.querySelector("body").classList.add("darkMode"),localStorage.setItem("darkMode",!0))}
localStorage.hasOwnProperty("darkMode")&&toggleDarkMode();
function showStats(a){document.getElementById("statsPage").style.display="block";a?document.getElementById("status").classList.add("win"):document.getElementById("status").classList.add("lose");var b="(?<![\\w\\d])"+solution+"(?![\\w\\d])",d=new RegExp(b,"gi"),c=kjv.filter(e=>e.text.match(d));c=c[Math.floor(Math.random()*c.length)];document.getElementById("word").innerText=solution.toUpperCase();document.getElementById("verse").innerHTML=c.text.replaceAll(new RegExp(b,"gi"),e=>"<b>"+e+"</b>");document.getElementById("reference").innerText=
c.book_name+" "+c.chapter+":"+c.verse;document.getElementById("reference").href="/search/?reference="+c.book_name+" "+c.chapter+":"+c.verse+"&load=true&word="+solution;localStorage.setItem("completedOn-practice",localStorage.getItem("loadGame-practice"));document.getElementById("gamesPlayed").innerText=parseInt(localStorage.getItem("gamesPlayed-practice"));showAlert(solution.toUpperCase(),!0);null==document.getElementById("statsBtn")&&(b=document.createElement("button"),b.id="statsBtn",b.innerText=
"Show Stats",b.classList.add("switchMode"),b.onclick=()=>{showStats(a)},document.getElementById("btnRow").appendChild(b))}
function share(){shareResult+="\nbibordle.web.app";var a=currentLetters.join("")!=solution?"X":lineId+1;shareResult=shareResult.replace("{guesses}",a);a=document.createElement("textarea");a.style="position: fixed;top:0;left:0;width:2px;height:2px;";a.innerHTML=shareResult;document.body.appendChild(a);a.select();document.execCommand("copy");a.style="display: none";document.getElementById("statsPage").style.display="none";showAlert("Copied to clipboard")};
